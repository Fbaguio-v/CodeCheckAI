{% extends 'a_classroom/base.html' %}
{% block title %}Set New Password{% endblock %}
{% block content %}

<div class="flex items-center justify-center w-full h-full px-4 bg-white sm:px-6 lg:px-8">
    <div class="flex items-center justify-center w-full max-w-md p-6 bg-white border border-gray-300 shadow-xl rounded-xl sm:max-w-lg md:max-w-2xl lg:max-w-3xl xl:max-w-4xl sm:p-8 md:p-10 lg:p-12">
        
        <form method="POST" class="w-full flex flex-col gap-4" novalidate>
            {% csrf_token %}
            
            <h2 class="text-center text-2xl font-semibold text-gray-900">Set New Password</h2>
            
            <p class="text-sm text-center text-gray-500 sm:text-base lg:text-lg">
                Please enter your new password twice so we can verify you typed it in correctly.
            </p>

            <!-- New Password -->
            <div class="flex flex-col w-full gap-1 sm:gap-2">
                <label for="id_new_password1" class="text-sm font-medium text-gray-800 sm:text-base">
                    New Password
                </label>
                <div class="relative">
                  <input type="password" name="new_password1" id="id_new_password1"
                         class="w-full h-10 pr-10 sm:h-12 px-3 sm:px-4 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-black"
                         placeholder="Enter new password" required>
                  <span id="id-for-password" style="position: absolute; top: 10px; right: -25px; transform: translate(-50%); border-left: 0.1rem solid; padding: 0 10px; cursor: pointer;">Show</span>
                </div>
                {% if form.new_password1.errors %}
                    <div class="text-sm text-red-600">
                        {{ form.new_password1.errors }}
                    </div>
                {% endif %}
            </div>

            <!-- Confirm Password -->
            <div class="flex flex-col w-full gap-1 sm:gap-2">
                <label for="id_new_password2" class="text-sm font-medium text-gray-800 sm:text-base">
                    Confirm Password
                </label>
                <div class="relative">
                  <input type="password" name="new_password2" id="id_new_password2"
                         class="w-full h-10 pr-10 sm:h-12 px-3 sm:px-4 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-black"
                         placeholder="Confirm new password" required>
                  <span id="id-for-confirm" style="position: absolute; top: 10px; right: -25px; transform: translate(-50%); border-left: 0.1rem solid; padding: 0 10px; cursor: pointer;">Show</span>
                </div>
                {% if form.new_password2.errors %}
                    <div class="text-sm text-red-600">
                        {{ form.new_password2.errors }}
                    </div>
                {% endif %}
            </div>

            <!-- Button -->
            <button type="submit" 
                    class="w-full px-4 py-2 text-sm sm:text-base md:text-lg text-white bg-black rounded-md shadow-lg hover:bg-gray-800 transition-colors cursor-pointer">
                Change Password
            </button>
        </form>
    </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const t1 = document.getElementById('id-for-password');
    const t2 = document.getElementById('id-for-confirm');
    const i1 = document.getElementById('id_new_password1');
    const i2 = document.getElementById('id_new_password2');
    if (t1) {
      t1.addEventListener('click', function(e){
        e.preventDefault();
        togglePassword('id_password1','toggle_password1');
        if(i1.type === "password") {
          i1.type = "text";
          t1.textContent = "Hide";
        } else {
          i1.type = "password";
          t1.textContent = "Show";
        }
      });
    }
    if (t2) {
      t2.addEventListener('click', function(e){
        e.preventDefault();
        togglePassword('id_password2','toggle_password2');
        if(i2.type === "password") {
          i2.type = "text";
          t2.textContent = "Hide";
        } else {
          i2.type = "password";
          t2.textContent = "Show";
        }
      });
    }
  });
</script>

{% endblock %}