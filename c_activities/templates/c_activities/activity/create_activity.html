{% load static tailwind_tags %}
{% tailwind_css %}
<div class="flex flex-col items-center justify-center h-screen w-full">
    <div class="w-[40%] border border-gray-500 p-6 rounded-lg shadow-sm bg-gray-200 ">
    	<form class="flex flex-col space-y-4" method="post" action="{% url 'c_activities:create-activity' %}"
			hx-post="{% url 'c_activities:create-activity' %}"
			hx-target="#create_activity"
			hx-swap="innerHTML">
    		{% csrf_token %}
    		<input id="subject_id" name="subject_id" hidden value="{{ subject_id }}">
			
			<div style="display: flex; gap: 10px;">
				<div style="width: 50%;" class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">			
					<label for="id_type" class="block font-bold">Type</label>
					<select id="id_type" name="type" class="w-full border border-gray-500 rounded bg-gray-100 px-3 py-2 focus:outline-none focus:ring focus:bg-gray-200" required>
						<option value="" disabled selected>Select type</option>
						<option value="activity">Activity</option>
						<option value="quiz">Quiz</option>
					</select>
				</div>
				<div style="width: 50%;" class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">
					<label for="id_language" class="block font-bold">Language</label>
					<select id="id_language" name="language" class="w-full border border-gray-500 rounded bg-gray-100 px-3 py-2 focus:outline-none focus:ring focus:bg-gray-200" required>
						<option value="" disabled selected>Select Language</option>
						<option value="Python">Python</option>
						<option value="Java">Java</option>
					</select>
				</div>
			</div>

			<div class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base"> 
				<label for="id_title" class="block font-bold">Title</label>
				<textarea 
					id="id_title" 
					name="id_title" 
					placeholder="Activity or Quiz Title" 
					rows="2"
					style="resize: none;"
					class="border border-solid w-full p-2 rounded h-32 text-sm font-medium text-gray-800 sm:text-base border-black bg-gray-100 focus:bg-gray-200" 
					required></textarea>
			</div>

			<div class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">
				<label for="id_description" class="block font-bold">Description</label>
				<textarea 
					id="id_description" 
					name="id_description" 
					placeholder="Description" 
					rows="4"
					style="resize: none;"
					class="border border-solid w-full p-2 rounded h-32 text-sm font-medium text-gray-800 sm:text-base border-black bg-gray-100 focus:bg-gray-200" 
					required></textarea>
			</div>

			<div class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">
				<label for="id_max_score" class="block font-bold">Max Score</label>
            	<input id="id_max_score" name="id_max_score" type="number" min="1" placeholder="Maximum Score" class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200" required>
			</div>

			<div class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">
    			<label for="id_max_attempt" class="block font-bold">(Quiz Only) Max Attempt</label>
    			<input id="id_max_attempt" name="id_max_attempt" value="3" type="number" min="1" placeholder="Maximum Attempt" class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200">
			</div>

			<div class="pb-3 text-left text-sm font-medium text-gray-800 sm:text-base">
				<label for="id_due_at" class="block font-bold">Due</label>
            	<input id="id_due_at" name="id_due_at" type="datetime-local" class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200" min="{% now 'Y-m-d\TH:i' %}" required>
			</div>
			<div>
				<h5 class="text-lg font-semibold mb-2">
					Evaluation Criteria (up to 100%)
				</h5>
	            <table class="w-full table-fixed border border-gray-300">
	                <thead>
	                    <tr class="bg-gray-100">
	                        <th class="border px-2 py-1">Correctness</th>
	                        <th class="border px-2 py-1">Syntax</th>
	                        <th class="border px-2 py-1">Structure</th>
	                    </tr>
	                </thead>
	                <tbody>
						<tr>
							<td class="text-center border px-2 py-1">
								<input name="criteria" 
										hx-post="{% url 'c_activities:check-criteria' %}" 
										class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200 criteria-input" 
										type="number" 
										min="1"
										hx-trigger="keyup changed delay:500ms"
										hx-target="#criteria-total"
										hx-include=".criteria-input" >%</input>
							</td>
							<td class="text-center border px-2 py-1">
								<input name="criteria"
										hx-post="{% url 'c_activities:check-criteria' %}"  
										class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200 criteria-input" 
										type="number" 
										min="1"
										hx-trigger="keyup changed delay:500ms"
										hx-target="#criteria-total"
										hx-include=".criteria-input">%</input>
							</td>
							<td class="text-center border px-2 py-1">
								<input name="criteria"
										hx-post="{% url 'c_activities:check-criteria' %}"  
										class="border border-solid border-black w-full p-2 rounded bg-gray-100 text-sm font-medium text-gray-800 sm:text-base focus:bg-gray-200 criteria-input" 
										type="number" 
										min="1"
										hx-trigger="keyup changed delay:500ms"
										hx-target="#criteria-total"
										hx-include=".criteria-input">%</input>
							</td>
						</tr>
						<tr>
							<td colspan="3" class="text-center border px-2 py-1">
								<div id="criteria-total">
									Total: <span class="font-bold">0%</span>
								</div>
							</td>
						</tr>
	                </tbody>
	            </table>
	    	</div>
			
			<button type="submit" id="create_activity" name="action" value="create_activity" class="bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition cursor-pointer border-2 border-solid rounded-xl">Create</button>

    	</form>
    </div>
</div>