<div class="relative w-[80%] bg-gray-200">
    <div class="h-full overflow-auto" style="scrollbar-gutter: stable;">
        {% if submission %}

            <div class="text-left text-sm font-medium text-gray-800 sm:text-base">
                <span class="font-bold">Email Address</span>
                <div class="mb-4 p-3 bg-gray-100 rounded-lg max-h-20 overflow-y-auto" style="scrollbar-gutter: stable;">
                    {{ submission.student.email }}
                </div>
            </div>

            <div class="text-left text-sm font-medium text-gray-800 sm:text-base">
                <span class="font-bold">Submitted Code</span>
                <div class="mb-4 p-3 bg-gray-100 rounded-lg max-h-32 overflow-y-auto">{{ submission.submitted_code }}</div>
            </div>

            <div id="feedback-{{ submission.id }}" class="text-left text-sm font-medium text-gray-800 sm:text-base">
                <span class="font-bold">Feedback</span>
                <div class="mb-4 p-3 bg-gray-100 rounded-lg max-h-32 overflow-y-auto" style="scrollbar-gutter: stable;">
                    {{ submission.feedback }}
                    <button class="cursor-pointer py-1 px-2 text-white bg-gray-800 rounded hover:bg-gray-950 {% if submission.status == 'returned' %} opacity-50 cursor-not-allowed bg-gray-500 {% endif %}"
                        hx-get="{% url 'c_activities:edit-insight' submission.id %}"
                        hx-swap="outerHTML"
                        hx-target="#feedback-{{ submission.id }}"
                        title="Click to edit feedback"
                        {% if submission.status == 'returned' %} disabled {% endif %}>Edit Feedback</button>
                </div>
            </div>
            <div id="score-{{ submission.id }}" class="text-left text-sm font-medium text-gray-800 sm:text-base">
                <span class="font-bold">Score</span>
                <div class="p-3 bg-gray-100 rounded-lg max-h-20 overflow-y-auto" style="scrollbar-gutter: stable;"> 
                    {{ submission.score }}
                    <button class="cursor-pointer py-1 px-2 text-white bg-gray-800 rounded hover:bg-gay-950 {% if submission.status == 'returned' %} opacity-50 cursor-not-allowed bg-gray-500 {% endif %}"
                        hx-get="{% url 'c_activities:edit-grade' submission.id %}" 
                        hx-swap="outerHTML" 
                        hx-target="#score-{{ submission.id }}" 
                        title="Click to edit grade"
                        {% if submission.status == 'returned' %} disabled {% endif %}>Edit Grade</button>
                </div>
            </div>
            <form hx-post="{% url 'c_activities:return-grade' submission.id %}" class="mt-2">
                {% csrf_token %}
                <button type="submit" name="action" value="return" 
                class="py-2 w-32 text-white bg-gray-800 rounded {% if submission.status == 'returned' %} opacity-50 cursor-not-allowed bg-gray-500 {% else %} cursor-pointer hover:bg-gray-950 {% endif %}" 
                title="{% if submission.status == 'returned' %} Grade already returned {% else %} Click to return grade to student {% endif %}" 
                {% if submission.status == 'returned' %}disabled onclick="return false;"{% endif %}>
                    Return Grade
                </button>
            </form>
        {% else %}
            <p class="text-center text-sm font-medium text-gray-800 sm:text-base">No submission.</p>
        {% endif %}
    </div>
</div>

<div class="flex justify-between items-center border-solid h-auto w-full bg-gray-200 text-sm font-medium text-gray-800 sm:text-base">
    <form hx-get="{% url 'a_classroom:prev_or_next' %}" hx-target="#output" hx-swap="innerHTML" class="w-full flex justify-center py-3">
        <input type="hidden" name="activity_id" value="{{ activity.activity_id }}">
        <input type="hidden" name="index" value="{{ index }}">
        <button type="submit" name="action" value="previous" 
        class="flex items-center justify-center py-2 w-32 text-white bg-gray-800 cursor-pointer rounded hover:bg-gray-950"
            hx-target="#output" hx-swap="innerHTML" title="Go to previous page">Previous</button> 
    </form>
    <form hx-get="{% url 'a_classroom:prev_or_next' %}" hx-target="#output" hx-swap="innerHTML" class="w-full flex justify-center py-3">
        <input type="hidden" name="activity_id" value="{{ activity.activity_id }}">
        <input type="hidden" name="index" value="{{ index }}">
        <button type="submit" name="action" value="next" 
        class="flex items-center justify-center py-2 w-32 text-white bg-gray-800 cursor-pointer rounded hover:bg-gray-950"
            hx-target="#output" hx-swap="innerHTML" title="Go to next page">Next</button> 
    </form>
</div>